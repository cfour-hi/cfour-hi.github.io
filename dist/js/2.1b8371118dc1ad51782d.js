webpackJsonp([2],{"4Op0":function(t,e){},OQQf:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("//Fk"),n=r.n(a),i=r("/j7X"),s={name:"article-placeholder",components:{VueContentLoading:r.n(i).a}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("article",[r("vue-content-loading",{attrs:{width:784,height:85}},[r("rect",{attrs:{x:"267",y:"25",rx:"5",ry:"5",width:"250",height:"20"}}),t._v(" "),r("rect",{attrs:{x:"292",y:"75",rx:"5",ry:"5",width:"200",height:"10"}})]),t._v(" "),r("vue-content-loading",{attrs:{width:784,height:370}},[r("rect",{attrs:{x:"28",y:"14",rx:"5",ry:"5",width:"70",height:"70"}}),t._v(" "),r("rect",{attrs:{x:"110",y:"23",rx:"5",ry:"5",width:"650",height:"12"}}),t._v(" "),r("rect",{attrs:{x:"110",y:"50",rx:"5",ry:"5",width:"650",height:"12"}}),t._v(" "),r("rect",{attrs:{x:"110",y:"75",rx:"5",ry:"5",width:"650",height:"12"}}),t._v(" "),r("rect",{attrs:{x:"28",y:"100",rx:"5",ry:"5",width:"300",height:"12"}}),t._v(" "),r("rect",{attrs:{x:"28",y:"130",rx:"5",ry:"5",width:"730",height:"3"}}),t._v(" "),r("rect",{attrs:{x:"28",y:"150",rx:"5",ry:"5",width:"730",height:"200"}})]),t._v(" "),t._l(5,function(e){return r("vue-content-loading",{key:e,attrs:{width:784,height:130}},[r("rect",{attrs:{x:"28",y:"0",rx:"5",ry:"5",width:"200",height:"16"}}),t._v(" "),r("rect",{attrs:{x:"28",y:"30",rx:"5",ry:"5",width:"650",height:"12"}}),t._v(" "),r("rect",{attrs:{x:"28",y:"60",rx:"5",ry:"5",width:"730",height:"12"}}),t._v(" "),r("rect",{attrs:{x:"28",y:"90",rx:"5",ry:"5",width:"500",height:"12"}})])})],2)},staticRenderFns:[]},c=r("VU/8")(s,o,!1,null,null,null).exports,l=r("Gu7T"),m=r.n(l),d=r("WlHA"),h=r("n5Qe"),u=r("oGFv"),v={page:1,size:30},_={name:"article-comment",components:{LoadMore:d.a},props:{article:{requires:!0,type:Object}},data:function(){return{comments:[],isLoading:!1,hasMoreComment:!1}},computed:{storeComments:function(){return this.$store.state.comments}},mounted:function(){var t=this.storeComments[this.article.id];if(t)return this.comments=t;this.handleLoadComments()},beforeDestroy:function(){v.page=1},methods:{handleLoadComments:function(){var t=this;this.isLoading=!0;var e=this.article,r=e.id,a=e.comments_url;Object(h.b)(a,v.page,v.size).then(function(e){t.isLoading=!1;var a=e.length;t.hasMoreComment=a&&a%v.size==0,a&&(t.comments=[].concat(m()(t.comments),m()(e.map(u.b))),t.$store.commit("updateCommentsByID",{id:r,comments:t.comments}),v.page+=1)})}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.comments.length?r("dl",{staticClass:"comments"},t._l(t.comments,function(e){return r("dd",{key:e.id,staticClass:"comment-item"},[r("a",{staticClass:"commenter-avatar-link",attrs:{href:e.user.html_url,target:"_blank",rel:"noopener noreferrer"}},[r("img",{staticClass:"commenter-avatar",attrs:{src:e.user.avatar_url,alt:"avatar"}})]),t._v(" "),r("div",{staticClass:"comment-header"},[r("a",{staticClass:"commenter-name-link",attrs:{href:e.user.html_url,target:"_blank",rel:"noopener noreferrer"}},[r("strong",[t._v(t._s(e.user.login))])]),t._v(" "),r("span",{staticClass:"comment-created"},[t._v(t._s(e.createdAt))])]),t._v(" "),r("article",{staticClass:"comment-body",domProps:{innerHTML:t._s(e.body)}})])})):t._e(),t._v(" "),r("load-more",{attrs:{visible:!!t.comments.length&&t.hasMoreComment,loading:t.isLoading},on:{load:t.handleLoadComments}}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!!t.comments.length&&!t.hasMoreComment,expression:"!!comments.length && !hasMoreComment"}],staticClass:"baseline",attrs:{"data-text":"没有更多评论"}})],1)},staticRenderFns:[]};var g={name:"article",components:{ArticlePlaceholder:c,ArticleMeta:function(){return new n.a(function(t){r.e(9).then(function(e){t(r("XdTI"))}.bind(null,r)).catch(r.oe)})},ArticleComment:r("VU/8")(_,f,!1,function(t){r("4Op0")},"data-v-655f85aa",null).exports},data:function(){return{article:{}}},mounted:function(){var t=this;document.scrollingElement.scrollTop=0;var e=this.$route,r=e.params,a=e.meta,n=parseInt(r.number,10),i=this.$store.state.articles[a.nav.key].find(function(t){return t.number===n});if(i)return this.article=i;var s=a.nav,o=s.repo,c=s.resolveArticle;Object(h.a)(o,n).then(function(e){return t.article=c(e)})}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"article"}},[t.article.id?r("article",{staticClass:"article-container"},[r("div",{staticClass:"article-border-top",style:{backgroundColor:t.article.labels[0]?"#"+t.article.labels[0].color:"#00a0e9"}}),t._v(" "),r("h2",{staticClass:"article-title"},[t._v(t._s(t.article.title))]),t._v(" "),r("article-meta",{attrs:{article:t.article}}),t._v(" "),t.article.summary?r("blockquote",{domProps:{innerHTML:t._s(t.article.summary)}}):t._e(),t._v(" "),t.article.banner?r("img",{attrs:{src:t.article.banner,alt:"banner"}}):t._e(),t._v(" "),r("div",{ref:"article",staticClass:"article-body",domProps:{innerHTML:t._s(t.article.body)}})],1):r("article-placeholder"),t._v(" "),t.article.comments?r("article-comment",{attrs:{article:t.article}}):t._e()],1)},staticRenderFns:[]};var y=r("VU/8")(g,p,!1,function(t){r("iRia")},"data-v-3a5a5058",null);e.default=y.exports},WlHA:function(t,e,r){"use strict";var a={name:"load-more",props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}}},n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"load-more",on:{click:function(e){t.$emit("load")}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fa fa-spinner fa-spin fa-fw"}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("加载更多")])])},staticRenderFns:[]};var i=r("VU/8")(a,n,!1,function(t){r("xXGT")},"data-v-62cfcbe4",null);e.a=i.exports},iRia:function(t,e){},xXGT:function(t,e){}});
//# sourceMappingURL=2.1b8371118dc1ad51782d.js.map